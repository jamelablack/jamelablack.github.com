<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      grit| commit &middot; A coding blog by Jam
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-0c">

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          <span style="color: #FF6347; font: Verdana">grit| commit</span>
        </a>
      </h1>
      <p class="lead">daily learnings as a ruby dev</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item active" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

    <p>&copy; 2015. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/04/22/POODR-ch2/">
        POODR - Ch2: Desgining Classes with a Single Responsibility
      </a>
    </h1>

    <span class="post-date">22 Apr 2015</span>

    <p>The foundation of an object-orietned is the message, but most visible organizational structure is the class.</p>

<h3>OO Questions:</h3>

<p>What are your classes?
How many should you have?
What behavior will they implement?
How much do they know about the other classes?
How much of themselves should the expose?</p>

<p>At this stage, your first obligation is to take a deep breath and insis that it be simple. Your goal is to model your application, using classes, such that is does what is is supposed to do right now. Design is more the art of perserving changability than it is the act of achieving perfection.</p>

<h3>Code should be TRUE:</h3>

<p>Transparent: The consquences of change should be obvious in the code that is changing and in distant code thst relies on it.</p>

<p>Reasonsable: The cost of any change should be proportional to the benefit thr change acheives</p>

<p>Usable: Existing code should be usable in a new and unexpected contents.</p>

<p>Expemplary: The cod itself should encourage those who change it to perpetuate these qualities.
TRUE ensures that each class has a single, well-defined responsibilty.</p>

<h2>Creating Classes That have a Single Responsibility</h2>

<p>A class should do the smallest posbbile useful thing, that is - it should have a sing responsibility.</p>

<h3>Why Single Responsibility Matters</h3>

<p>Appliciations that are easy to change consist of classes that are easy to reuse. Reusable classes are pluggable into units of well-defined behavior that have few entanglements.</p>

<p>A class that has more than one responsibility is difficult to reuse. If you want to resuse some (but not all) of it behavior, it is impossible to get only the parts you need.</p>

<p>If the responsibilties are so coupled that you cannot use just the beviour you need, you could duplicat the code of interest.</p>

<h3>Deterimining If a Class Has Single Responsibility</h3>

<p>How can you determine if a class contains the behavior or belongs somewhere else?
Ask it! &quot;Mr Gear, What is your ratio?&quot;</p>

<p>Another way to figure it out is to attempt to describe the class in one sentence. If the simplest description you can devise includes &quot;and&quot;, the class likely has more than one responsibility. If the description includes &quot;or&quot;, then the class has more than one responsibility and they aren&#39;t even related.</p>

<p>When a class is related to it&#39;s purpose, its considered &quot;highly cohesive&quot; or to have single responsibility (Single Responsibility Principle)</p>

<h3>Determining when to make desgin decisions:</h3>

<p>Don&#39;t feel compelled to make desgin decisions prematurely. When the future cost of doing nothing is the same as the current cost, postpone the decision. Make the decision only when you must with the information you have at the time.</p>

<h2>Writing Code that Embraces Change</h2>

<p>Here are a few well known techniques that you can use to create code that embaces change:</p>

<h3>1. Depend on Behavior, not Data</h3>

<p>Behavior is captured in methods anid invoked by sending messages. In addition to behavior, objects often contain data. Data is held in an instance variable and can be anything from an simple string to complex hash. Data can be accessed in 2 ways: 1. you can refer directly to the instance variable
2. you can wrap the intance variable in an accessor method</p>

<h4>Hide Data Structures</h4>

<h4>1. Always wrap instance variables in accessor methods insteadof directly referring to the variables</h4>

<h5>2. Use Structs</h5>

<p>Direct references into complicated structure are confusing, because they obscure what the data really is and the maintenance is a nightmare.
In Ruby, it&#39;s easy to seperate structure from meaning - just as you use a method to wrap an instance variable, you can use a Ruby Struct class to wrap a structure.
Ruby defines Struct as &quot;a convenient way to bundle a number of attributes together, using accessor methods, without having to write an explicit class.</p>

<h2>2. Enforce Signle Responsibilities Everywhere</h2>

<h4>3. Extract Extra Responsibilities from Methods</h4>

<p>Methods, like classes should have single responsibility so they are easier to use. Apply the same design techniques as you would with classes.</p>

<ul>
<li>Seperating iteration from the action that&#39;s being performed on each element is a common case of multiple responsibitlity that is easy to recognize.</li>
</ul>

<p>The imapct of the single refactoring like ithis is small, but the cumulative effect of this coding style is huge. Methods that have single resonsibility confer the following benefits:</p>

<h5>1. Expose previously hidden qualities</h5>

<h5>2. Avoid the need for comments</h5>

<h5>3. Encourage reuse</h5>

<h5>4. Easy to move to another class</h5>

<h3>Isolate Extra Responsibilities in Classes</h3>

<p>Once every method has a single responsibility, the scope of your class will be more apparent</p>

<p>The path to changeable and maintable object oriented software begins with classes that have a single responsibility. Classes that do one thing isolate that thing from the rest of your application. This isolation allows change without consquence and reuse without duplication.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/04/20/POODR-ch1/">
        POODR - Ch1: Object Oriented Design
      </a>
    </h1>

    <span class="post-date">20 Apr 2015</span>

    <p>Object Oriented Design requires that you shift from thinking about the world as a collection of predefined procedures to modeling th world as a series of messages that are past between objects.</p>

<h2>In Praise of Design</h2>

<p>Desgin really doesn&#39;t become a concern if nothing ever changes (requirements). But something always changes and it is the need for change that makes desugn matter.</p>

<h3>Why is Change Hard?</h3>

<p>Object oriented applications are made of partst that interact to produce the behavior of the whole. The parts are objects, interactions are emobodied in the messages that pass between them.</p>

<p>OOD is about managing dependencies. It&#39;s a set of coding techniques that arrange dependencies such that objects can tolerate change. Changing one object forces change upon its collabortors.</p>

<p>However when objects know too much, they have expectations about the world in which they reside. And these expectations contstrain them.</p>

<h2>A Practical Definition of Design</h2>

<p>Design is an art of arranging code. Design has two components:
You must not only write code for the feature you plan to deliver today, you must also create code that is amendable to being changed later.</p>

<p>Design that is that anticipates specific future requirements almost always ends badly. It shouldn&#39;t guess hte future, but rather perserves options for accomodating the future, leaving you romm to move.</p>

<p>Primary goal is to allow you to desiglm later, and its primary goal is reduce the cost of change.</p>

<h3>Design Principles</h3>

<p>SOLID stands for Single Responsibilty, Open-Closed, Liskov Substitution, Interface Segregation, &amp; Dependancy Inversion</p>

<p>DRY - Don&#39;t Repeat Yourself</p>

<p>LoD - Law of Demeter</p>

<h3>Design Patterns</h3>

<p>give us the power to name common problems and solve those problems in common ways, allowing us to big fuzzy things into focus.</p>

<h3>The Act of Design</h3>

<p>How design fails:
1. Lack of it - programmers typically now little about design
2. Under-designed - lack of knowledge of design principles
3. Over-design - seasoned devs may disgn relentlessly
4. Object Oriented Desgin fails when the act of design is seperated from the act of programming. The feedback loop should be timely and incremental; the iterative techniques of the Agile Development are perfect for well-designd OO applications.</p>

<h3>When to Design</h3>

<p>Agile believes that the mot cost-effective way to produce what customers&#39;s really want is to collaborate with the, building software one bit at atime such that each deivered bit has the opprotunity to alter ideas about the next.</p>

<p>There is no need to do BUFD (Big Upfront Design)</p>

<p>The Agile Process gaurantees change and yu ability to do so depneds on your design (sinple, flexibe, and malleable code).</p>

<h3>Judging Design</h3>

<p>Back in the day, design was jusged by the number of lines of code (sometimes referred to as SLOC). The ultimate software metric would be cost per feature over the time interval the matters.</p>

<p>Failure to design increases your technical debt.</p>

<p>Your decision about design depends on two things.:
your skills and your timeframe.</p>

<h2>A brief introduction to Object Oriented Programming:</h2>

<p>OO applications are made of objects and messages that pass between them.</p>

<h3>Procedural Langauges</h3>

<p>is a non-object oriented progamming technique. Every possible data type and po]eration already exists, you can&#39;t make up wholly new operations or brand new data types.</p>

<h2>Object Oriented Programming</h2>

<p>Ruby has a string object instead of a string data type. Because Ruby string objects supply their own operations, Ruby doesn&#39;t have to know anything in particular about the string data type but rather it only need to know how to send object messages.</p>

<p>Ruby allows to you to provide classes tha essentially blueprints for the consturction of similar objects. A class defines methods (definitions of behavior) and attributes(definitons of variables), while also allowing you to instantiate new objects with same operations or behavior.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/04/16/course3-mailgun/">
        Build Robust & Production Quality Applications - Lesson 6: Mailgun
      </a>
    </h1>

    <span class="post-date">16 Apr 2015</span>

    <h2>Mailgun</h2>

<p>Mailgun is an email service for developers - which is clear in its interface. It has a ver low-level design that is easy for tweaking and has alot of options.</p>

<ul>
<li>It focuses on transaction emails and it optimized for deliverability.</li>
<li>It also allows for the receipt of emails.</li>
<li>You can specify an email address that you want mailgun to listen. Mailgun can pre-process the message and parse out parts of the email and send to your app for processing.</li>
<li>It can handle campaign emails, number of clicks, etc.</li>
</ul>

<h2>How to Integrate Mailgun into our Server</h2>

<p>We are using Heroku and there is a <a href="https://addons.heroku.com/mailgun">Mailgun/Heroku add-on</a>. There is a free option that limits to 300 emails/day.</p>

<p>It&#39;s pretty simple beyond that. You just log into Heroku, select your app, and run the command:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">heroku</span> <span class="ss">addons</span><span class="p">:</span><span class="n">create</span> <span class="n">mailgun</span></code></pre></div>

<h3>Read Documentation on Sending Emails via SMTP</h3>

<p>Go to your configuation for your production env, and change the setting to those listed. Make sure you keep stmp as the delivery method. Env variables will be set by Heroku, so you don&#39;t have to worry about that.</p>

<p>Mailgun supports two delivery methods. The reason we can use smtp is becasue ActionMailer will help us to prepare to proper map format. But HTTP is also an option. You don&#39;t have to rely on Rails to do that. You can just use REST client that will use an HTTP POST. Check the API documentation to see what other headers can be sent.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/04/13/course3-email-service-providers/">
        Build Robust & Production Quality Applications - Lesson 6: Email Service Providers
      </a>
    </h1>

    <span class="post-date">13 Apr 2015</span>

    <p>With Gmail, there are clear sending <a href="https://support.google.com/a/answer/166852?hl=en">limitations</a>.</p>

<p>Sending out emails is something that you should offload onto a third-party provider as it is a critical business process. You want to ensure emails are recieved right away and not in the recipients email folder.</p>

<p>Mailgun &amp; Postmark are the recommended email service providers. When considering vendors, you want to focus on devliverability.</p>

<p>Check out the is <a href="http://www.quora.com/Why-are-Mailgun-and-Postmark-so-much-more-expensive-than-Sendgrid-and-AWS-SES">Quora article</a> on comparing well-known email service providers. In this course, we will use Mailgun.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/04/07/couse3-concerns/">
        Build Robust & Production Quality Applications - Lesson 6: ActiveSupport::Concerns
      </a>
    </h1>

    <span class="post-date">07 Apr 2015</span>

    <p>In our Todos example, we created a method</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">before_create</span> <span class="ss">:generate_token</span></code></pre></div>

<p>for and then defined the generate_ token method under private,
within the Todos model.</p>

<p>But what if you want to include this in several models?
DRY does not only mean &quot;Dont Repeat Yourself&quot;, but it also means to have
one authoritative source for method calls</p>

<p>That&#39;s where ActiveSupport::Concerns can help by basically extracting the common code into a module</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">lib</span><span class="o">/</span><span class="n">tokenable</span><span class="o">.</span><span class="n">rb</span>
<span class="k">module</span> <span class="nn">Tokenable</span>
<span class="kp">extend</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">Concern</span>

  <span class="n">included</span> <span class="k">do</span>
    <span class="n">before_create</span> <span class="ss">:generate_token</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">generate_token</span>
    <span class="nb">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="no">SecureRandom</span><span class="o">.</span><span class="n">urlsafe_base64</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></div>

<p>Then in the Todo model:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Todo</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="kp">include</span> <span class="no">Tokenable</span></code></pre></div>

<p>With Rails 3 or later, the lib directory is no longer automatically loaded
You instead have to:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">require_relative</span> <span class="s1">&#39;../..lib/tokenable&#39;</span>

<span class="k">class</span> <span class="nc">Todo</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="kp">include</span> <span class="no">Tokenable</span>

<span class="k">end</span></code></pre></div>

<p>Now if you dont want to require_relative everytime:
You can do one of the two:</p>

<ol>
<li>move the Tokenable file to your models folder</li>
<li>go to /enviornments/application.rb
config.autoload_paths &lt;&lt; &quot;#{Rails.root}/lib&quot;</li>
</ol>

<p>then remove require_relative from the model.</p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>
    </div>

  </body>
</html>
